/*! IFrameOrchestrator - v1.3.9 - 2015-05-13
* https://github.com/InstanceOfAnObject/IFrameOrchestrator
* Copyright (c) 2015 ; Licensed  */
!function(){"use strict";var a={},b={},c=function(a,b,c){return a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?a.attachEvent("on"+b,c):(b="on"+b,"function"==typeof a[b]&&(c=function(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}(a[b],c)),a[b]=c,!0)},d=function(a){try{return JSON.parse(a)}catch(b){return null}},e=function(){var a=1*new Date,b=Math.random(),c=a*b;return a+"."+c},f=function(a){var b={__ifo:!0,__ts:1*new Date,action:a,iframe:{}};parent.postMessage(JSON.stringify(b),"*")},g=function(a){return void 0!==a&&null!==a&&"string"==typeof a},h=function(a){return void 0!==a&&null!==a&&"function"==typeof a},i=function(b,c){if(!g(b))throw new Error("IFrameOrchestratorClient [getProperty] Invalid property name");if(!h(c))throw new Error("IFrameOrchestratorClient [getProperty] ["+b+"] Invalid callback");var d=e(),i={type:"getProperty",uuid:d,data:{key:b}};a[d]=c,f(i)},j=function(a,b){if(!g(a))throw new Error("IFrameOrchestratorClient [setProperty] Invalid property name");var c={type:"setProperty",data:{key:a,value:b}};f(c)},k=function(a,b){if(!g(a))throw new Error("IFrameOrchestratorClient [triggerEvent] Invalid event name");var c={type:"triggerEvent",event:{name:a,data:b}};f(c)},l=function(a,c){if(!g(a))throw new Error("IFrameOrchestratorClient [subscribeEvent] Invalid event name");var d={type:"subscribeEvent",event:{name:a}};b[a]=c,f(d)},m=function(a){if(!g(a))throw new Error("IFrameOrchestratorClient [subscribeEvent] Invalid event name");if(void 0!==b[a]){var c={type:"unsubscribeEvent",event:{name:a}};delete b[a],f(c)}},n={getPropertyReply:function(b){var c=d(b.data);if(void 0!==c&&null!==c){var e=a[c.uuid];e&&e(c.value),delete a[c.uuid]}},eventBroadcast:function(a){var c=d(a.data);if(void 0!==c&&null!==c){var e=c.name,f=c.data,g=b[e];void 0!==g&&"function"==typeof g&&g(f)}}},o=function(a){var b=d(a.data);if(void 0!==b&&null!==b){var c=b.type;c&&n[c]&&n[c](a)}},p=function(){return{getProperty:i,setProperty:j,triggerEvent:k,subscribeEvent:l,unsubscribeEvent:m}};c(window,"message",o),"function"==typeof define&&define.amd?define(function(){return p()}):window.iframeOrchestratorClient=p()}();